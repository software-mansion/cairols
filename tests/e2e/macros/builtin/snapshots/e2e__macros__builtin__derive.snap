---
source: tests/e2e/macros/builtin/mod.rs
description: "// → test_package/cairo_project.toml\n[crate_roots]\ntest_package = \"src\"\n\n[config.global]\nedition = \"2024_07\"\n\n// → test_package/src/lib.cairo\n#[derive(Drop, Serde)]\nstruct A {\n    a: felt252\n}"
expression: report
---
[[expansions]]
analyzed_lines = """
#[d<caret>erive(Drop, Serde)]
#[derive(Drop,<caret> Serde)]
#[derive(Drop, Serde)]<caret>
struct <caret>A {
"""
generated_code = """
#[derive(Drop, Serde)]
struct A {
    a: felt252,
}
//-----
impl ADrop<> of core::traits::Drop<A>;

impl ASerde<> of core::serde::Serde<A> {
    fn serialize(self: @A, ref output: core::array::Array<felt252>) {
        core::serde::Serde::<felt252>::serialize(self.a, ref output)
    }
    fn deserialize(ref serialized: core::array::Span<felt252>) -> core::option::Option<A> {
        let a = core::internal::InferDestruct::<
            felt252,
        > { value: core::serde::Serde::<felt252>::deserialize(ref serialized)? };
        core::option::Option::Some(A { a: a.value })
    }
}
"""

mapped_diagnostics:
- url: file://[SCARB_REGISTRY_STD]/core/src/test/language_features/macro_test.cairo
  diagnostics:
  - related_code: define_fn!(func_macro_fn);
    diagnostic:
      range:
        start:
          line: 567
          character: 4
        end:
          line: 567
          character: 30
      severity: 1
      message: Missing token ';'.
  - related_code: define_ty_and_getter!(MyStruct);
    diagnostic:
      range:
        start:
          line: 585
          character: 4
        end:
          line: 585
          character: 36
      severity: 1
      message: Missing token ';'.
  - related_code: define_enum!(MyEnum);
    diagnostic:
      range:
        start:
          line: 605
          character: 4
        end:
          line: 605
          character: 25
      severity: 1
      message: Missing token ';'.
  - related_code: generic_fn_macro!();
    diagnostic:
      range:
        start:
          line: 621
          character: 4
        end:
          line: 621
          character: 24
      severity: 1
      message: Missing token ';'.
  - related_code: define_in_mod!(a, b);
    diagnostic:
      range:
        start:
          line: 639
          character: 4
        end:
          line: 639
          character: 25
      severity: 1
      message: Missing token ';'.
  - related_code: define_outer_and_call_inner!();
    diagnostic:
      range:
        start:
          line: 661
          character: 4
        end:
          line: 661
          character: 35
      severity: 1
      message: Missing token ';'.
  - related_code: define_foo!();
    diagnostic:
      range:
        start:
          line: 686
          character: 8
        end:
          line: 686
          character: 22
      severity: 1
      message: Missing token ';'.
